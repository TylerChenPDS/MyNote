# 项目介绍

## 危险废物管理系统

### 权限模块

权限模块涉及的表：user， user_role, role, role_reource, resource

resource的基本结构

![image-20210218213224863](https://gitee.com/CTLQAQ/picgo/raw/master/image-20210218213224863.png)

当用户首次登陆成功的时候，我们会为用户生成一个token里面包含了用户的可见的基本信息，我们将其拥有的权限信息从数据库中查询出来，并将其保存到redis缓存中去。并将该用户拥有的权限字符串全部返回到前台，我们前台的菜单是写死的，我们对每一个侧边栏，以及按钮都分配一个权限字符串，如果该字符串包含于刚才返回用户拥有的字符串，则渲染对应的侧边栏，或者按钮。

我们在网关模块设置拦截器，当用户点击按钮发起url请求的时候，我们对url进行检查，判断它有没有访问该url的权限。其实就是读取redis中对应token拥有的url信息。

### 唯一订单号的生成

客户要求，订单号为  订单标识符+日期时间+当日第几单。当日第几单需要自己去设计。

为此，创建了一个新的关系表，里面有2个字段，一个是bussiness_name 业务名称, id 对应的最大id。

然后创建一个存储过程，每当需要获取订单号的时候，就调用存储过程获取订单号。规则为：**根据业务名称获取对应的id,并为其加上行锁**，也就是排他锁。当前事务没有结束时，阻断其他的读锁和写锁。这样当第二个线程想要获取订单号时，就要等待上一个加锁的线程，保证了订单号的唯一性。获取到最大id后，将id+1，并且修改doc_id对应业务的最大id为id+1，最后将新的id返回。

考虑到凌晨12：00不会接单，所以设置定时任务，没天12：00定时把上面创建业务表id设置成0；

## 羽毛球场馆预定系统

### 通知功能

主要有三张表：t_notce, t_notice_rel_user, user。

![image-20210219165337310](https://gitee.com/CTLQAQ/picgo/raw/master/image-20210219165337310.png)

通知主要分2类，针对所有用户的通知（如，场地维护，开/闭馆日期等等），和针对某个特定用户的通知（比如，离预约时间差15分钟就发一个通知提醒）。在notice表中有一个字段target_is_all, 如果这个字段为1，则说明这是针对所有用户的。每次用户登录的时候，都要向服务器发起请求，查询针对所有人的消息，和针对自己的消息，并按照日期排序。

### 签到功能，信用管理

用户点击签到，服务器根据用户id，和订单信息和时间戳和UUID生成二维码，将对应得字符串放入redis中去，设置时效为1分钟。

管理员扫描二维码，如果提取二维码中得到订单信息，把订单设置为已签到状态，并记录签到时间。个人记录中有一个字段，记录着信用等级这一个字段，同时有一张rule(late, diff),里面有2个关键字段，第一个表示签到迟到了几分钟，第二个表示扣除的信用积分。设置一个定时任务，对于未签到的订单，一律扣除rule中对应late=0x7ffffffff的对应积分，默认60分以下将不能预定场馆。

# 自我介绍

我叫陈泰良，今年23岁，现在是南京大学软件学院电子信息专业的研究生一年级学生，对软件开发怀有浓厚的兴趣。我也会积极参加学校老师引导的项目练手，目前已经参与多个项目，如：基于微服务的危险废物管理系统，羽毛球场馆预定系统等等。现在主要在参加实验室安排的实习项目，在星环信息科技的见习，每周去2天。但仍觉得自己经历甚浅，希望能通过实习，更多地与社会接触完成从学生到职业人员地蜕变。请考官多多指教，谢谢。

